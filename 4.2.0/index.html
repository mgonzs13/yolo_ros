<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>yolo_ros: YOLO for ROS 2: yolo_ros</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">yolo_ros: YOLO for ROS 2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespaceyolo__ros.html">yolo_ros</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>ROS 2 wrap for YOLO models from <a href="https://github.com/ultralytics/ultralytics">Ultralytics</a> to perform object detection and tracking, instance segmentation, human pose estimation and Oriented Bounding Box (OBB). There are also 3D versions of object detection, including instance segmentation, and human pose estimation based on depth images.</p>
<div align="center"></div><div align="center"><a href="https://opensource.org/license/gpl-3-0"><img src="https://img.shields.io/badge/GitHub-GPL--3.0-informational" alt="License: MIT" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/releases"><img src="https://img.shields.io/github/release/mgonzs13/yolo_ros.svg" alt="GitHub release" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros?branch=main"><img src="https://img.shields.io/github/languages/code-size/mgonzs13/yolo_ros.svg?branch=main" alt="Code Size" style="pointer-events: none;" class="inline"/></a> <a href="https://libraries.io/github/mgonzs13/yolo_ros?branch=main"><img src="https://img.shields.io/librariesio/github/mgonzs13/yolo_ros?branch=main" alt="Dependencies" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/commits/main"><img src="https://img.shields.io/github/last-commit/mgonzs13/yolo_ros.svg" alt="Last Commit" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/issues"><img src="https://img.shields.io/github/issues/mgonzs13/yolo_ros" alt="GitHub issues" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/pulls"><img src="https://img.shields.io/github/issues-pr/mgonzs13/yolo_ros" alt="GitHub pull requests" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/graphs/contributors"><img src="https://img.shields.io/github/contributors/mgonzs13/yolo_ros.svg" alt="Contributors" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/mgonzs13/yolo_ros/actions/workflows/python-formatter.yml?branch=main"><img src="https://github.com/mgonzs13/yolo_ros/actions/workflows/python-formatter.yml/badge.svg?branch=main" alt="Python Formatter Check" style="pointer-events: none;" class="inline"/></a></div><div align="center"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">ROS 2 Distro   </th><th class="markdownTableHeadCenter">Branch   </th><th class="markdownTableHeadCenter">Build status   </th><th class="markdownTableHeadCenter">Docker Image   </th><th class="markdownTableHeadNone">Documentation    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><b>Humble</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/mgonzs13/yolo_ros/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/mgonzs13/yolo_ros/actions/workflows/humble-docker-build.yml?branch=main"><img src="https://github.com/mgonzs13/yolo_ros/actions/workflows/humble-docker-build.yml/badge.svg?branch=main" alt="Humble Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yolo_ros/tags?name=humble"><img src="https://img.shields.io/badge/Docker%20Image%20-humble-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://mgonzs13.github.io/yolo_ros/latest"><img src="https://github.com/mgonzs13/yolo_ros/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><b>Jazzy</b>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/mgonzs13/yolo_ros/tree/main"><code>main</code></a>   </td><td class="markdownTableBodyCenter"><a href="https://github.com/mgonzs13/yolo_ros/actions/workflows/jazzy-docker-build.yml?branch=main"><img src="https://github.com/mgonzs13/yolo_ros/actions/workflows/jazzy-docker-build.yml/badge.svg?branch=main" alt="Jazzy Build" style="pointer-events: none;" class="inline"/></a>   </td><td class="markdownTableBodyCenter"><a href="https://hub.docker.com/r/mgons/yolo_ros/tags?name=jazzy"><img src="https://img.shields.io/badge/Docker%20Image%20-jazzy-blue" alt="Docker Image" class="inline"/></a>   </td><td class="markdownTableBodyNone"><a href="https://mgonzs13.github.io/yolo_ros/latest"><img src="https://github.com/mgonzs13/yolo_ros/actions/workflows/doxygen-deployment.yml/badge.svg" alt="Doxygen Deployment" style="pointer-events: none;" class="inline"/></a>   </td></tr>
</table>
</div><div align="center"></div><h1><a class="anchor" id="autotoc_md1"></a>
Table of Contents</h1>
<ol type="1">
<li>Installation</li>
<li>Docker</li>
<li>Models</li>
<li>Usage</li>
<li>Demos</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Installation</h1>
<div class="fragment"><div class="line">cd ~/ros2_ws/src</div>
<div class="line">git clone https://github.com/mgonzs13/yolo_ros.git</div>
<div class="line">pip3 install -r yolo_ros/requirements.txt</div>
<div class="line">cd ~/ros2_ws</div>
<div class="line">rosdep install --from-paths src --ignore-src -r -y</div>
<div class="line">colcon build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Docker</h1>
<p>Build the <a class="el" href="namespaceyolo__ros.html">yolo_ros</a> docker.</p>
<div class="fragment"><div class="line">docker build -t yolo_ros .</div>
</div><!-- fragment --><p>Run the docker container. If you want to use CUDA, you have to install the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html">NVIDIA Container Tollkit</a> and add <code>--gpus all</code>.</p>
<div class="fragment"><div class="line">docker run -it --rm --gpus all yolo_ros</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
Models</h1>
<p>The compatible models for <a class="el" href="namespaceyolo__ros.html">yolo_ros</a> are the following:</p>
<ul>
<li><a href="https://docs.ultralytics.com/models/yolov3/">YOLOv3</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov4/">YOLOv4</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov5/">YOLOv5</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov6/">YOLOv6</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov7/">YOLOv7</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov8/">YOLOv8</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov9/">YOLOv9</a></li>
<li><a href="https://docs.ultralytics.com/models/yolov10/">YOLOv10</a></li>
<li><a href="https://docs.ultralytics.com/models/yolo11/">YOLOv11</a></li>
<li><a href="https://docs.ultralytics.com/models/yolo12/">YOLOv12</a></li>
<li><a href="https://docs.ultralytics.com/models/yolo-world/">YOLO-World</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Usage</h1>
<details >
<summary >
Click to expand</summary>
<p></p>
<p></p>
</details>
<h2><a class="anchor" id="autotoc_md6"></a>
YOLOv5</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov5.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
YOLOv8</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov8.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
YOLOv9</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov9.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
YOLOv10</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov10.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
YOLOv11</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov11.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
YOLOv12</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov12.launch.py</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
YOLO-World</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo-world.launch.py</div>
</div><!-- fragment --><p><img src="./docs/rqt_graph_yolov8.png" alt="" width="100%" class="inline"/> </p>
<h2><a class="anchor" id="autotoc_md13"></a>
Topics</h2>
<ul>
<li>**/yolo/detections**: Objects detected by YOLO using the RGB images. Each object contains a bounding box and a class name. It may also include a mark or a list of keypoints.</li>
<li>**/yolo/tracking**: Objects detected and tracked from YOLO results. Each object is assigned a tracking ID.</li>
<li>**/yolo/detections_3d**: 3D objects detected. YOLO results are used to crop the depth images to create the 3D bounding boxes and 3D keypoints.</li>
<li>**/yolo/debug_image**: Debug images showing the detected and tracked objects. They can be visualized with rviz2.</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Parameters</h2>
<p>These are the parameters from the <a href="./yolo_bringup/launch/yolo.launch.py">yolo.launch.py</a>, used to launch all models. Check out the <a href="https://docs.ultralytics.com/modes/predict/#inference-arguments">Ultralytics page</a> for more details.</p>
<ul>
<li><b>model_type</b>: Ultralytics model type (default: YOLO)</li>
<li><b>model</b>: YOLO model (default: yolov8m.pt)</li>
<li><b>tracker</b>: tracker file (default: bytetrack.yaml)</li>
<li><b>device</b>: GPU/CUDA (default: cuda:0)</li>
<li><b>yolo_encoding</b>: Encoding to convert input image before using YOLO (default: bgr8)</li>
<li><b>enable</b>: whether to start YOLO enabled (default: True)</li>
<li><b>threshold</b>: detection threshold (default: 0.5)</li>
<li><b>iou</b>: intersection Over Union (IoU) threshold for Non-Maximum Suppression (NMS) (default: 0.7)</li>
<li><b>imgsz_height</b>: image height for inference (default: 480)</li>
<li><b>imgsz_width</b>: image width for inference (default: 640)</li>
<li><b>half</b>: whether to enable half-precision (FP16) inference speeding up model inference with minimal impact on accuracy (default: False)</li>
<li><b>max_det</b>: maximum number of detections allowed per image (default: 300)</li>
<li><b>augment</b>: whether to enable test-time augmentation (TTA) for predictions improving detection robustness at the cost of speed (default: False)</li>
<li><b>agnostic_nms</b>: whether to enable class-agnostic Non-Maximum Suppression (NMS) merging overlapping boxes of different classes (default: False)</li>
<li><b>retina_masks</b>: whether to use high-resolution segmentation masks if available in the model, enhancing mask quality for segmentation (default: False)</li>
<li><b>input_image_topic</b>: camera topic of RGB images (default: /camera/rgb/image_raw)</li>
<li><b>image_reliability</b>: reliability for the image topic: 0=system default, 1=Reliable, 2=Best Effort (default: 1)</li>
<li><b>input_depth_topic</b>: camera topic of depth images (default: /camera/depth/image_raw)</li>
<li><b>depth_image_reliability</b>: reliability for the depth image topic: 0=system default, 1=Reliable, 2=Best Effort (default: 1)</li>
<li><b>input_depth_info_topic</b>: camera topic for info data (default: /camera/depth/camera_info)</li>
<li><b>depth_info_reliability</b>: reliability for the depth info topic: 0=system default, 1=Reliable, 2=Best Effort (default: 1)</li>
<li><b>target_frame</b>: frame to transform the 3D boxes (default: base_link)</li>
<li><b>depth_image_units_divisor</b>: divisor to convert the depth image into meters (default: 1000)</li>
<li><b>maximum_detection_threshold</b>: maximum detection threshold in the z-axis (default: 0.3)</li>
<li><b>use_tracking</b>: whether to activate tracking after detection (default: True)</li>
<li><b>use_3d</b>: whether to activate 3D detections (default: False)</li>
<li><b>use_debug</b>: whether to activate debug node (default: True)</li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
Lifecycle Nodes</h1>
<p>Previous updates add Lifecycle Nodes support to all the nodes available in the package. This implementation tries to reduce the workload in the unconfigured and inactive states by only loading the models and activating the subscriber on the active state.</p>
<p>These are some resource comparisons using the default yolov8m.pt model on a 30fps video stream.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">State   </th><th class="markdownTableHeadNone">CPU Usage (i7 12th Gen)   </th><th class="markdownTableHeadNone">VRAM Usage   </th><th class="markdownTableHeadNone">Bandwidth Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Active   </td><td class="markdownTableBodyNone">40-50% in one core   </td><td class="markdownTableBodyNone">628 MB   </td><td class="markdownTableBodyNone">Up to 200 Mbps    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Inactive   </td><td class="markdownTableBodyNone">~5-7% in one core   </td><td class="markdownTableBodyNone">338 MB   </td><td class="markdownTableBodyNone">0-20 Kbps   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md16"></a>
YOLO 3D</h2>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolov8.launch.py use_3d:=True</div>
</div><!-- fragment --><p><img src="./docs/rqt_graph_yolov8_3d.png" alt="" width="100%" class="inline"/> </p>
<h1><a class="anchor" id="autotoc_md17"></a>
Demos</h1>
<h1><a class="anchor" id="autotoc_md18"></a>
Object Detection</h1>
<p>This is the standard behavior of <a class="el" href="namespaceyolo__ros.html">yolo_ros</a> which includes object tracking.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1gTQt6soSIq1g2QmK7locHDiZ-8MqVl2w/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1gTQt6soSIq1g2QmK7locHDiZ-8MqVl2w" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md19"></a>
Instance Segmentation</h1>
<p>Instance masks are the borders of the detected objects, not all the pixels inside the masks.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py model:=yolov8m-seg.pt</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1dwArjDLSNkuOGIB0nSzZR6ABIOCJhAFq/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1dwArjDLSNkuOGIB0nSzZR6ABIOCJhAFq" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md20"></a>
Human Pose</h1>
<p>Online persons are detected along with their keypoints.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py model:=yolov8m-pose.pt</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1pRy9lLSXiFEVFpcbesMCzmTMEoUXGWgr/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1pRy9lLSXiFEVFpcbesMCzmTMEoUXGWgr" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md21"></a>
3D Object Detection</h1>
<p>The 3D bounding boxes are calculated by filtering the depth image data from an RGB-D camera using the 2D bounding box. Only objects with a 3D bounding box are visualized in the 2D image.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py use_3d:=True</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1ZcN_u9RB9_JKq37mdtpzXx3b44tlU-pr/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1ZcN_u9RB9_JKq37mdtpzXx3b44tlU-pr" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md22"></a>
3D Object Detection (Using Instance Segmentation Masks)</h1>
<p>In this, the depth image data is filtered using the max and min values obtained from the instance masks. Only objects with a 3D bounding box are visualized in the 2D image.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py model:=yolov8m-seg.pt use_3d:=True</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1wVZgi5GLkAYxv3GmTxX5z-vB8RQdwqLP/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1wVZgi5GLkAYxv3GmTxX5z-vB8RQdwqLP" alt="" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md23"></a>
3D Human Pose</h1>
<p>Each keypoint is projected in the depth image and visualized using purple spheres. Only objects with a 3D bounding box are visualized in the 2D image.</p>
<div class="fragment"><div class="line">ros2 launch yolo_bringup yolo.launch.py model:=yolov8m-pose.pt use_3d:=True</div>
</div><!-- fragment --><p><a href="https://drive.google.com/file/d/1j4VjCAsOCx_mtM2KFPOLkpJogM0t227r/view?usp=sharing"><img src="https://drive.google.com/thumbnail?authuser=0&amp;sz=w1280&amp;id=1j4VjCAsOCx_mtM2KFPOLkpJogM0t227r" alt="" class="inline"/></a> </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
